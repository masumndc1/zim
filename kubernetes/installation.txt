

... my system 

[root@nginx ~]# uname -a
Linux nginx 4.9.39-29.el7.x86_64 #1 SMP Fri Jul 21 15:09:00 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux

[root@nginx ~]# cat /etc/redhat-release 
CentOS Linux release 7.4.1708 (Core) 
[root@nginx ~]# 

... installing kubernetes
... installing kubernetes is easy. before that we need to install docker too

[root@nginx ~]# yum install docker
[root@nginx ~]# yum install kubernetes

[root@nginx ~]# yum install etcd
[root@nginx ~]# systemctl enable etcd
[root@nginx ~]# systemctl start etcd
[root@nginx ~]# systemctl status etcd

Check etcd service status

systemctl status etcd

... kubernetes has the four core componets.
... etcd: which is simple, reliable, fast, secure key-value store.
... kubernetes master: is responsilbe to run tasks on containers running on nodes using api calls.
... kubelet: is an agent which runs on node to monitor the containers on that node.
... service proxy: which routes the client traffic to the pods and vice versa.

... the master has also the following components

... Apiserver: The apiserver takes API requests, processes them, and stores the result 
... in etcd if required and returns the result.
... The scheduler: monitors the API for unscheduled pods and schedules them on 
... a node to run and also notifies the about the same to the API.
... The controller: manages the replication level of the pods, starting new pods 
... in a scale up event and stopping some of the pods in a scale down.
... The pause: keeps the port mappings of all the containers in the pod 
... or the network endpoint of the pod.

... running following command to download an image 

[masum@nginx ~]$ sudo docker run --net=host -d gcr.io/google_containers/etcd:2.0.12 \ 
/usr/local/bin/etcd --addr=127.0.0.1:4001 --bind-addr=0.0.0.0:4001  \
--data-dir=/var/etcd/data
ac94d47802d6bf704b7dd8e7cecc5e353a97d30eb6e21616f6805f9b47bb9b51

[masum@nginx ~]$ sudo docker run --net=host -d gcr.io/google_containers/etcd:2.0.12 
[sudo] password for masum: 
Unable to find image 'gcr.io/google_containers/etcd:2.0.12' locally
Trying to pull repository gcr.io/google_containers/etcd ... 
2.0.12: Pulling from gcr.io/google_containers/etcd
a3ed95caeb02: Pull complete 
35c8bf5fd6cd: Pull complete 
a7e0d6960478: Pull complete 
3109a5487eac: Pull complete 
Digest: sha256:24cf1202eea3953f9a8c44b0930d03666019ff8c277a0f6cd6190645eb1f7ba5
abe6cab554a0d32359a7c5bdb04bf860e202fb9f1d9cbe3281317f76fad2aa30
[masum@nginx ~]$ 
[masum@nginx ~]$ 

... the above command will download a docker image from google container

[root@nginx ~]# 
[root@nginx ~]# docker ps
CONTAINER ID        IMAGE                                  COMMAND                 CREATED             STATUS              PORTS               NAMES
abe6cab554a0        gcr.io/google_containers/etcd:2.0.12   "/usr/local/bin/etcd"   7 minutes ago       Up 6 minutes                            distracted_banach
[root@nginx ~]# 

... the command kubelet will start the kubernetes master.
... therefore run the following command to run master

[root@nginx kube]# cat run.sh 

#/bin/bash

docker run \
    --volume=/:/rootfs:ro \
    --volume=/sys:/sys:ro \
    --volume=/dev:/dev \
    --volume=/var/lib/docker/:/var/lib/docker:ro \
    --volume=/var/lib/kubelet/:/var/lib/kubelet:rw \
    --volume=/var/run:/var/run:rw \
    --net=host \
    --pid=host \
    --privileged=true \
    -d gcr.io/google_containers/hyperkube:v1.0.1 \
    /hyperkube kubelet --containerized --hostname-override="127.0.0.1"	--address="0.0.0.0" \
	--api-servers=http://localhost:8080 \
	--config=/etc/kubernetes/manifests

... this command will create another containers like below.

[root@nginx kube]# docker ps
CONTAINER ID        IMAGE                                       COMMAND                  CREATED             STATUS              PORTS               NAMES
2e480017b214        gcr.io/google_containers/hyperkube:v1.0.1   "/hyperkube kubelet -"   8 minutes ago       Up 7 minutes                            sick_cori
abe6cab554a0        gcr.io/google_containers/etcd:2.0.12        "/usr/local/bin/etcd"    23 minutes ago      Up 23 minutes                           distracted_banach
[root@nginx kube]# 

... starting service proxy

[root@nginx kube]# cat proxy.sh 
#!/bin/bash

docker run -d --net=host --privileged gcr.io/google_containers/hyperkube:v1.0.1 \
 /hyperkube proxy -- master=http://127.0.0.1:8080 --v=2

[root@nginx kube]# bash proxy.sh 
676e7d534f27ae6cd2ccc7ca4367e507de7f9473ceb3de69811ad733066bfd74

[root@nginx kube]# docker ps
CONTAINER ID        IMAGE                                       COMMAND                  CREATED             STATUS              PORTS               NAMES
676e7d534f27        gcr.io/google_containers/hyperkube:v1.0.1   "/hyperkube proxy -- "   8 seconds ago       Up 7 seconds                            berserk_mayer
2e480017b214        gcr.io/google_containers/hyperkube:v1.0.1   "/hyperkube kubelet -"   48 minutes ago      Up 48 minutes                           sick_cori
abe6cab554a0        gcr.io/google_containers/etcd:2.0.12        "/usr/local/bin/etcd"    About an hour ago   Up About an hour                        distracted_banach
[root@nginx kube]# 

... info related to a container

[root@nginx kube]# docker inspect abe6cab554a0
[
    {
        "Id": "abe6cab554a0d32359a7c5bdb04bf860e202fb9f1d9cbe3281317f76fad2aa30",
        "Created": "2017-12-13T19:58:54.039254255Z",
        "Path": "/usr/local/bin/etcd",
        "Args": [],
        "State": {
            "Status": "running",

// output cut //

... the controlling. service related task.

[root@nginx kube]# kubectl
kubectl controls the Kubernetes cluster manager. 

... 

